<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Le Libido ‚Äì Dating App</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold: #e1bf78;
      --red: #950606;
      --green: #06954E;
      --blue: #064D95;
      --black: #000;
      --white: #fff;
    }

    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: #0d0d0d;
      color: var(--white);
    }

    /* HEADER */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--black);
      padding: 10px 16px;
      border-bottom: 1px solid #222;
    }

    .top-bar img {
      height: 36px;
      border-radius: 8px;
    }

    .logo {
      max-height: 40px;
    }

    .top-bar .bell {
      height: 30px;
      filter: invert(1);
    }

    /* MAIN COLOR STACK */
    .color-section {
      height: calc(100vh - 140px); /* header + bottom nav ~140px */
      display: flex;
      flex-direction: column;
    }

    .color-section div {
      flex: 1;
    }

    .blue { background: var(--blue); }
    .green { background: var(--green); }
    .red { background: var(--red); }

    /* BOTTOM NAV */
    .bottom-nav {
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: var(--black);
      border-top: 1px solid #222;
      padding: 12px 0;
      position: fixed;
      bottom: 0;
      width: 100%;
    }

    .bottom-nav div {
      text-align: center;
      color: white;
      font-size: 14px;
    }

    .bottom-nav img {
      height: 28px;
      margin-bottom: 4px;
    }

    .active-bubble {
      background: white;
      border-radius: 8px;
      padding: 6px;
    }
  </style>
</head>
<body>
    <!-- HEADER -->
  <div class="top-bar">
    <img src="your-profile.jpg" alt="Profile Photo" style="border-radius: 8px; width: 40px; height: 40px;" />
    <img src="golden-le-libido-logo.png" class="logo" alt="Le Libido Logo" />
    <img src="bell-icon.png" class="bell" alt="Notifications" />
  </div>

  <!-- COLORED STACKED SECTIONS -->
  <div class="color-section">
    <div class="blue"></div>
    <div class="green"></div>
    <div class="red"></div>
  </div>

  <!-- BOTTOM NAVIGATION -->
  <div class="bottom-nav">
    <div>
      <div>Daters</div>
    </div>
    <div class="active-bubble">
      <img src="chat-bubble-icon.png" alt="Chat" />
    </div>
    <div>
      <div>Venues</div>
    </div>
  </div>
</body>
</html>
<script>
// Dummy example data ‚Äî replace with real data from Firebase
const currentUserId = 'user123';
const topMatches = ['user456', 'user789', 'user321']; // Sorted by compatibility
const daters = [
  {
    id: 'user456',
    name: 'Alex',
    age: 29,
    archetype: 'Tender Protector',
    archetypeColor: 'blue',
    firstImpression: 'Charming and confident.',
    chocolate: true,
    profilePic: 'alex.jpg',
    profileLink: '/premium/tender_protector.html'
  },
  {
    id: 'user789',
    name: 'Riley',
    age: 32,
    archetype: 'Mood Multiplier',
    archetypeColor: 'green',
    firstImpression: 'Always up for more.',
    chocolate: false,
    profilePic: 'riley.jpg',
    profileLink: '/premium/mood_multiplier.html'
  },
  {
    id: 'user321',
    name: 'Jordan',
    age: 35,
    archetype: 'Dungeon Master',
    archetypeColor: 'red',
    firstImpression: 'Unapologetically in charge.',
    chocolate: true,
    profilePic: 'jordan.jpg',
    profileLink: '/premium/dungeon_master.html'
  }
];

// Returns medal emoji if the user is a top match
function getMedal(userId) {
  const index = topMatches.indexOf(userId);
  if (index === 0) return 'ü•á';
  if (index === 1) return 'ü•à';
  if (index === 2) return 'ü•â';
  return '';
}

// Create dater card HTML
function renderDaterCard(dater) {
  const section = document.querySelector(`.${dater.archetypeColor}`);
  const medal = getMedal(dater.id);
  const chocolate = dater.chocolate ? 'üç´' : '';

  const card = document.createElement('div');
  card.classList.add('dater-card');
  card.style.border = '2px solid var(--gold)';
  card.style.borderRadius = '12px';
  card.style.margin = '10px';
  card.style.padding = '12px';
  card.style.background = '#000';
  card.style.color = '#fff';
  card.style.cursor = 'pointer';

  card.innerHTML = `
    <div style="display:flex; align-items:center; gap:12px;">
      <img src="${dater.profilePic}" alt="${dater.name}" style="width:50px; height:50px; border-radius:10px; object-fit:cover; border:2px solid var(--gold);" />
      <div>
        <div style="font-size: 1.2rem; font-weight: 600;">${dater.name}, ${dater.age} ${medal} ${chocolate}</div>
        <div style="font-size: 0.9rem; color: var(--gold);">${dater.archetype}</div>
        <div style="font-size: 0.8rem;">${dater.firstImpression}</div>
      </div>
    </div>
  `;

  card.onclick = () => {
    window.location.href = dater.profileLink;
  };

  section.appendChild(card);
}

// Load all daters
window.onload = () => {
  daters.forEach(renderDaterCard);
};
</script>
<script>
// === MONMOUTH COUNTY VENUES ===
const monmouthVenues = [
  "Metropolitan Cafe", "American Hotel", "Nonna‚Äôs", "Rosalitas", "Tre", "Sweet Buns", "365 Cafe",
  "Jersey Freeze", "Moore‚Äôs Tavern", "Osaka", "El Meson", "La Lupa", "Osteria", "Gabriella‚Äôs",
  "Lola‚Äôs", "Johnny Mac‚Äôs", "Taka", "Paradise", "Porta", "Watermark", "Cardinal Provisions",
  "St. Laurent Social Club", "Stone Pony", "Pascale and Sabine", "Kim Marie‚Äôs", "Asbury Ale House",
  "Laylow Cocktail Lounge", "Donovan‚Äôs Reef", "Ocean House Tap and Grill", "Brothers Daly",
  "Tommy‚Äôs Tavern", "The Avenue", "Bar Anticipation", "D‚Äôjais", "Buena Sera", "Strollo‚Äôs Lighthouse",
  "Playa Bowls", "Lita", "Salt Steakhouse", "The Butcher‚Äôs Block", "Surf Taco",
  "Brick House Tavern & Tap", "Centrada", "Teak", "Cabin", "Mj‚Äôs", "Centerfolds", "La Dolce Vita",
  "Deal Lake Bar + Co"
];

// === GOOGLE MAPS VENUE FETCHING ===
function fetchVenuesNearUser(userLocation) {
  const venueList = document.getElementById("venueList");
  const service = new google.maps.places.PlacesService(document.createElement('div'));

  monmouthVenues.forEach(name => {
    service.textSearch({
      query: name,
      location: new google.maps.LatLng(userLocation.lat, userLocation.lng),
      radius: 20000
    }, (results, status) => {
      if (status === google.maps.places.PlacesServiceStatus.OK && results[0]) {
        const venue = results[0];

        const distance = google.maps.geometry.spherical.computeDistanceBetween(
          new google.maps.LatLng(userLocation.lat, userLocation.lng),
          venue.geometry.location
        );
        const isNearby = distance < 75;

        // Pick icon
        const emoji = venue.types.includes("restaurant") ? "üç¥"
                    : venue.types.includes("bar") ? "üç∏"
                    : venue.types.includes("cafe") ? "‚òï"
                    : venue.types.includes("ice_cream") ? "üç¶" : "üìç";

        // Image fallback
        const image = venue.photos?.[0]?.getUrl({ maxWidth: 100, maxHeight: 100 }) ||
                      "https://via.placeholder.com/100";

        // Build card
        const card = document.createElement("div");
        card.className = "venue-card";
        card.innerHTML = `
          <div class="venue-header">
            <img src="${image}" alt="${venue.name}" />
            <div class="venue-name">${emoji} ${venue.name}</div>
          </div>
          <p>Distance: ${Math.round(distance)}‚ÄØm</p>
          <button class="checkin-btn" onclick="checkInToVenue('${venue.place_id}', ${isNearby})">
            ${isNearby ? "‚úÖ You are here" : "Check In"}
          </button>
          <div id="users-${venue.place_id}" class="dater-container"></div>
        `;
        venueList.appendChild(card);
      }
    });
  });
}

// === ON LOAD ===
window.onload = () => {
  navigator.geolocation.getCurrentPosition(pos => {
    const userLocation = {
      lat: pos.coords.latitude,
      lng: pos.coords.longitude
    };
    fetchVenuesNearUser(userLocation);
  });
};

// === CHECK-IN FUNCTION ===
function canCheckIn() {
  const last = localStorage.getItem("lastCheckInTime");
  const now = Date.now();
  if (!last || now - parseInt(last) > 10 * 60 * 1000) {
    localStorage.setItem("lastCheckInTime", now.toString());
    return true;
  }
  return false;
}

function checkInToVenue(placeId, isNearby) {
  if (!isNearby) {
    alert("You must visit this venue to check in.");
    return;
  }
  if (!canCheckIn()) {
    alert("You can only check in once every 10 minutes.");
    return;
  }
  alert("Checked into venue: " + placeId);
  // TODO: Save check-in to Firebase if needed
}
</script>
